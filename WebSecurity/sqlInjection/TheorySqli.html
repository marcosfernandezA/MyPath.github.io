<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Theory - SQL Injection</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>

    <header>
    <nav class="navbar global-nav">
            <a href="../../index.html#index" class="nav-logo" id="nav-logo">
                <span class="wave">üõ°Ô∏è</span> AppSec in a Nutshell
            </a>
            <ul>
                <li class="dropdown">
                    <a href="../../index.html#web-security-index" id="web-security-link"><span>üîí</span> Web Security</a>
                    <ul class="dropdown-content">
                        <li><a href="../../WebSecurity/xss/TheoryXSS.html" id="xss-link"><span>üß¨</span> XSS</a></li>
                        <li><a href="../../WebSecurity/sqlInjection/TheorySqli.html" id="sql-injection-link"><span>üíæ</span> SQL Injection</a></li>
                    </ul>
                </li>
                <li><a href="../../index.html#devsecops"><span>‚öôÔ∏è</span> DevSecOps</a></li>
                <li><a href="../../index.html#design-security"><span>üé®</span> Design and Security</a></li>
            </ul>
        </nav>
    </header>

    <main>
        <div class="layout">
            <aside class="sidebar">
                <h3>√çndice</h3>
                <input type="search" class="search-input" id="sidebar-search" placeholder="Buscar en el √≠ndice...">

                <div class="accordion" id="sidebar-accordion">
                    <div class="accordion-item" data-key="theory">
                        <div class="accordion-header">Theory <small>‚ñæ</small></div>
                        <div class="accordion-content">
                            <ul>
                                <li><a href="#sqli-intro" class="index-link">1. SQL Injection</a></li>
                                <li><a href="#sqli-blind" class="index-link">2. Blind SQL Injection</a></li>
                                <li><a href="#sqli-timed" class="index-link">3. Time-based SQL Injection</a></li>
                            </ul>
                        </div>
                    </div>

                    <div class="accordion-item" data-key="portswigger">
                        <div class="accordion-header">PortSwigger labs <small>‚ñæ</small></div>
                        <div class="accordion-content">
                            <ul>
                                <li><a href="PortSwigger/Lab1.html" class="index-link">Lab: SQLi 1</a></li>
                                <li><a href="PortSwigger/Lab2.html" class="index-link">Lab: SQLi 2</a></li>
                            </ul>
                        </div>
                    </div>

                    <div class="accordion-item" data-key="htb">
                        <div class="accordion-header">Hack The Box <small>‚ñæ</small></div>
                        <div class="accordion-content">
                            <ul>
                                <li><a href="HackTheBox/Machine1.html" class="index-link">Machine: Example1</a></li>
                                <li><a href="HackTheBox/Machine2.html" class="index-link">Machine: Example2</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </aside>

            <div class="content-area">
                <section class="card" id="sqli-intro">
                    <h2>1. SQL Injection</h2>
                    <div class="info-box">
                        <p>What is SQL injection (SQLi)?

* SQL injection is a web security flaw where an attacker changes the database queries an app sends.
* If inputs are used directly in SQL, an attacker can make the database run commands the developer did not intend.

Where SQLi can appear (not only WHERE):

* **WHERE clauses** in SELECT/UPDATE queries ‚Äî the most common place.
* **UPDATE** statements: in the values being set or in the WHERE clause.
* **INSERT** statements: inside the inserted values.
* **SELECT** statements: inside table or column names (if names are built from user input).
* **ORDER BY** clause: if ordering is built from user input.
* **Other query parts**: any place where user data is combined into SQL can be dangerous.

Different data formats and contexts

* Inputs can come in JSON, XML, or other formats. These formats can change how you craft an attack.
* Firewalls and filters (WAFs) often look for keywords. Encoding, escaping, or changing the input format can hide those keywords and sometimes bypass defenses.

Why it is serious

* An attacker can read, change, delete, or add data.
* Sensitive data at risk includes passwords, credit cards, and personal info.
* SQLi has caused major data breaches, fines, and long-term compromises.

Example of encoding/escaping to bypass filters (XML)

* Some servers decode XML escapes before putting the text into SQL. Example:

  ```
  <stockCheck>
      <productId>123</productId>
      <storeId>999 &#x53;ELECT * FROM information_schema.tables</storeId>
  </stockCheck>
  ```

  * The `&#x53;` is an XML escape for `S`. After decoding, the server might see `SELECT * FROM information_schema.tables`, which then becomes part of the SQL query.

Tips for testers and developers (simple)

* Test all parts of a query, not just WHERE.
* Don't put raw user input into table names, column names, ORDER BY fields, or SQL strings.
* Use parameterized queries / prepared statements and strong input validation.
* Watch for unusual encodings (XML/HTML entities, JSON escapes) that may be decoded server-side.

Short one-line summary:

* SQLi lets attackers change any part of an SQL query (not just WHERE), and inputs in JSON/XML may hide attacks through encoding or escaping.
</p>
                    </div>
                </section>

                <section class="card" id="sqli-blind">
                    <h2>2. Blind SQL Injection</h2>
                    <div class="info-box">
                        <p>En blind SQLi el atacante infiere informaci√≥n a trav√©s de respuestas booleanas o diferencias en el tiempo de respuesta.</p>
                    </div>
                </section>

                <section class="card" id="sqli-timed">
                    <h2>3. Time-based SQL Injection</h2>
                    <div class="info-box">
                        <p>El atacante provoca retrasos en la base de datos y mide el tiempo de respuesta para extraer informaci√≥n.</p>
                    </div>
                </section>
            </div>
        </div>

        <script>
            // Accordion toggle
            (function(){
                const accordion = document.getElementById('sidebar-accordion');
                accordion.querySelectorAll('.accordion-header').forEach(header => {
                    header.addEventListener('click', () => {
                        const item = header.parentElement;
                        item.classList.toggle('open');
                    });
                });

                // Search within index
                const search = document.getElementById('sidebar-search');
                search.addEventListener('input', function(){
                    const q = this.value.trim().toLowerCase();
                    document.querySelectorAll('.accordion-item').forEach(item => {
                        let anyMatch = false;
                        item.querySelectorAll('.index-link').forEach(link => {
                            const text = link.textContent.trim().toLowerCase();
                            if (!q || text.indexOf(q) !== -1) {
                                link.style.display = '';
                                anyMatch = true;
                            } else {
                                link.style.display = 'none';
                            }
                        });
                        if (anyMatch) item.classList.add('open'); else item.classList.remove('open');
                    });
                });
            })();
        </script>
    </main>

</body>
</html>